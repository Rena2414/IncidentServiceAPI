# IncidentService

## Overview

This is a **Web API built with ASP.NET Core and Entity Framework Core (Code First)**, designed to simulate a simple **Microsoft Dynamics CRM backend**.  
It supports the management of **Accounts, Contacts, and Incidents**, with business rules enforcing proper relationships between these entities.

### Key Features

1. **Accounts**
   - Each account must have **at least one contact** upon creation.
   - Account `Name` is unique and serves as a primary identifier.

2. **Contacts**
   - Each contact is linked to an account.
   - Contacts are **uniquely identified by their email address**.
   - When creating an account or incident:
     - If a contact with the same email exists, the contact is **updated** and linked to the account if not already linked.
     - Otherwise, a **new contact** is created automatically.
   - **Standalone contact creation is not allowed** to enforce business rules.

3. **Incidents**
   - Each incident is linked to exactly **one account**.
   - The primary key is a **string `IncidentName`**, autogenerated using a GUID.
   - Creating an incident automatically ensures the associated account exists and manages contact linking.

4. **Business Rules**
   - An **account cannot exist without at least one contact**.
   - An **incident cannot be created without an account**.
   - Contact reuse is enforced to prevent duplicate contacts across accounts.
